<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Always Be Publishing &#8211; Write, Review, Test, Merge, Build, Deploy, Repeat. <br> Let's Treat Docs Like Code.</title>
<meta name="description" content="What do you want to know about these techniques?">
<meta name="keywords" content="api, github, docs, repos">


<!-- Twitter Cards -->
<meta name="twitter:title" content="Always Be Publishing">
<meta name="twitter:description" content="What do you want to know about these techniques?">
<meta name="twitter:site" content="@annegentle">
<meta name="twitter:creator" content="@annegentle">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://localhost:4000/images/seabamirum-common-redpoll.jpg">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Always Be Publishing">
<meta property="og:description" content="What do you want to know about these techniques?">
<meta property="og:url" content="http://localhost:4000/articles/infoq/">
<meta property="og:site_name" content="Write, Review, Test, Merge, Build, Deploy, Repeat. <br> Let's Treat Docs Like Code.">

<!-- Webmaster Tools verfication -->
<meta name="google-site-verification" content="LDMHcKG0vxyyo7Tp6hA5xs3_lJYX7Spk9IqC4VZsitE">



<link rel="canonical" href="http://localhost:4000/articles/infoq/">
<link href="http://localhost:4000/feed.xml" type="application/atom+xml" rel="alternate" title="Write, Review, Test, Merge, Build, Deploy, Repeat. <br> Let's Treat Docs Like Code. Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://localhost:4000/assets/css/main.css">
<!-- Webfonts -->
<script src="https://use.edgefonts.net/source-sans-pro:n2,i2,n3,i3,n4,i4,n6,i6,n7,i7,n9,i9;source-code-pro:n4,n7;volkhov.js"></script>

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
  <script src="http://localhost:4000/assets/js/vendor/html5shiv.min.js"></script>
  <script src="http://localhost:4000/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="http://localhost:4000/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>


<!-- MathJax -->
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://localhost:4000/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://localhost:4000/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://localhost:4000/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://localhost:4000/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://localhost:4000/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://localhost:4000/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body id="post">

<div class="navigation-wrapper">
	<nav role="navigation" id="site-nav" class="animated drop">
	    <ul>
      
		    
		    <li><a href="http://localhost:4000/about/" >About</a></li>
		  
		    
		    <li><a href="http://localhost:4000/articles/" >Articles</a></li>
		  
		    
		    <li><a href="http://localhost:4000/book/" >Book</a></li>
		  
		    
		    <li><a href="http://localhost:4000/search/" >Search</a></li>
		  
	    </ul>
	</nav>
</div><!-- /.navigation-wrapper -->

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->

<header class="masthead">
	
		<div class="wrap">
			<a href="http://localhost:4000/" class="site-logo" rel="home" title="Write, Review, Test, Merge, Build, Deploy, Repeat. <br> Let's Treat Docs Like Code."><img src="http://localhost:4000/images/treat-docs-like-code.png" width="200" height="200" alt="Write, Review, Test, Merge, Build, Deploy, Repeat. <br> Let's Treat Docs Like Code. logo" class="animated fadeInDown"></a>
		</div>
	
</header><!-- /.masthead -->


<div class="js-menu-screen menu-screen"></div>


<div id="main" role="main">
  <article class="hentry">
    <img src="http://localhost:4000/images/seabamirum-common-redpoll.jpg" class="entry-feature-image" alt="Always Be Publishing" ><p class="image-credit">Image credit: <a href="https://flic.kr/p/dFow3k" target="_blank">Flickr seabamirum</a></p>
    <div class="entry-wrapper">
      <header class="entry-header">
        <ul class="entry-tags">
          <li><a href="http://localhost:4000/tags/#api" title="Pages tagged api">api</a></li><li><a href="http://localhost:4000/tags/#github" title="Pages tagged github">github</a></li><li><a href="http://localhost:4000/tags/#docs" title="Pages tagged docs">docs</a></li><li><a href="http://localhost:4000/tags/#repos" title="Pages tagged repos">repos</a></li>
        </ul>
        
          <h1 class="entry-title">Always Be Publishing</h1>
        
      </header>
      <footer class="entry-meta">
        
        
          <img src="http://localhost:4000/images/anne_gentle.jpg" class="bio-photo" alt="Anne Gentle bio photo"></a>
        
        <span class="author vcard">By <span class="fn">Anne Gentle</span></span>
        <span class="entry-date date published"><time datetime="2017-03-02T00:00:00-06:00"><i class="fa fa-calendar-o"></i> March 02, 2017</time></span>
        <span class="entry-date date modified"><time datetime="Thu Mar 2 09:52:40 CST 2017"><i class="fa fa-pencil"></i> March 02, 2017</time></span>
        
        <span class="social-share-twitter">
  <a href="https://twitter.com/intent/tweet?hashtags=api,github,docs,repos&amp;text=Always%20Be%20Publishing&amp;url=http://localhost:4000/articles/infoq/&amp;via=annegentle" title="Share on Twitter" itemprop="Twitter"><i class="fa fa-twitter-square"></i> Tweet</a>
</span>
<span class="social-share-facebook">
  <a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/articles/infoq/" title="Share on Facebook" itemprop="Facebook"><i class="fa fa-facebook-square"></i> Like</a>
</span>
<span class="social-share-googleplus">
  <a href="https://plus.google.com/share?url=http://localhost:4000/articles/infoq/" title="Share on Google Plus" itemprop="GooglePlus"><i class="fa fa-google-plus-square"></i> +1</a>
</span>
<!-- /.social-share -->
        
      </footer>
      <div class="entry-content">
        <h1 id="always-be-publishing-continuous-integration-for-rest-api-docs">Always Be Publishing: Continuous Integration for REST API Docs</h1>

<p>Key Takeaways</p>

<ul>
  <li>API documentation provides a critical path for predicting customer success.</li>
  <li>Collaborating on documentation close to the code provides better reviews, more automation efficiencies, and enables doc quality tests.</li>
  <li>Provide common docs frameworks, standards, automation, and tools to give teams an efficiency boost.</li>
</ul>

<p>Let’s face it. Writing documentation can be downright boring sometimes. It is as exacting as the code itself. There are syntax errors and unwanted whitespace that you can introduce. Sometimes your ideas simply stop flowing, but you still need to fill in the blanks to make sure your docs are complete. With the growth of APIs as products, your documentation is more important than ever to create a successful API.</p>

<p>By writing documentation collaboratively as close to the code as possible, you can automate documentation tests, builds, and deployments. This approach provides many benefits: tested doc builds, continuous publishing, reviews of the docs and the code together, multiple outputs including tested code examples, release management, and prevents code from merging unless it has adequate documentation.</p>

<h2 id="introduction-to-docs-cicd">Introduction to Docs CI/CD</h2>

<p>For REST API documentation, three frameworks provide documentation output in the form of web pages, many of them interactive. These are OpenAPI(Swagger), RESTful API Modeling Language (RAML), and API Blueprint. OpenAPI, previously known as Swagger, is based on JSON, and because YAML is a superset of JSON, you can interchange the source files that describe the API. RAML is a YAML-based language to describe REST APIs. API Blueprint uses Markdown and can also adhere to <a href="https://help.github.com/categories/writing-on-github/">GitHub Flavored Markdown syntax</a>.</p>

<p>Many programming languages have a documentation framework that integrates well with the code itself. Typically these are static site generators, such as Jekyll for Ruby, and Sphinx for Python. The source files for the docs are Markdown or reStructured Text (RST). With these static site generators, you can make beautiful documentation sites. In fact, there’s a <a href="https://github.com/PharkMillups/beautiful-docs">collection of links to beautiful docs on GitHub</a>.</p>

<p>Because these doc source files can be transformed using scripts, you can continuously build the documentation with the same build jobs as the code. Jekyll sites are deployed by copying flat files from a static directory, so you can store a script to build the site in the code repo with other build files. You can also have a simple link checker to test for any broken links before deploying the site. The <code class="highlighter-rouge">htmlproofer</code> is a Ruby library written to do just that.</p>

<p>The deployment mechanism provided by GitHub is called GitHub Pages. You have some options for triggering a docs deployment. You can automate builds from a <code class="highlighter-rouge">gh-pages</code> branch, from the <code class="highlighter-rouge">master</code> branch, or always deploy docs from a <code class="highlighter-rouge">/docs</code> directory on the <code class="highlighter-rouge">master</code> branch. Your GitHub repo has these options on the Settings page. While you can deploy to a custom domain name, one limitation for GitHub Pages currently is that you <a href="https://github.com/isaacs/github/issues/156">cannot serve directly through HTTPS</a>, but as a free service it’s a good starting point. For production web sites, you can deploy from GitHub to a cloud server or VPS that has the security requirements you need. More or less, you are creating your own hosted web site.</p>

<h2 id="why-treat-docs-like-code">Why treat docs like code?</h2>

<p>Writing with developers and for developers works well when the deliverables help developers. API documentation tasks provide a great example for why and when to treat docs like code. There are gains to be had when automating reference information, for example, and gains to be had by writing collaboratively. Also, one of the biggest success indicators for an API is the accuracy and helpfulness of the documentation. Here are some specific reasons to treat docs like code.</p>

<p>Collaboration: Having developers and technical writers write collaboratively provides both roles with valuable information. Developers want to write for an audience that resembles themselves, and can provide empathy for the reader. Writers have a special knack for organizing information, writing well, and revealing concepts and reference information in the proper order. Collaborating together in the same repository increases opportunities to both teach and learn.</p>

<p>Contributions: When you don’t “throw writing over the wall” to a tech writing team, you can broaden the number of contributors, even if the API itself is not a public one with public documentation. Or, you can enable more contributions from the end-users themselves by providing open source docs repos in version control systems like GitHub. Any interested developers, including customers, can subscribe to notifications on pull requests when the docs are in the repo with the code.</p>

<p>Track bugs: For higher-quality docs, provide a way to report documentation bugs directly on the output page. As Linus’s Law states, “given enough eyeballs, all bugs are shallow.” By providing those eyeballs a place to report the bug, you give more code-like quality tracking to the docs. Plus, with metrics in place through issue tracking, you can measure the quality of the docs and ensure resources are in place when needed to squash those bugs.</p>

<p>Reviews: When reviewing docs that are included with code, reviewers can block a change to the code when the documentation is insufficient. This review guidance provides the team with the power to make the docs high quality, even when they have to be in synch with fast-moving code.</p>

<p>Tests and builds: By having a matched staging build for reviews and a production build for delivery to readers, you can be confident your review of built documentation meets user needs.</p>

<p>Deployments and releases: With docs like code, realize you are separating builds from deployments. This way, you can have reviews on early drafts of documentation and it does not become contractual until the doc build is deployed and released. Or, you can choose to release some documents continuously to keep up with the code. For example, you may choose to write narrative documentation and tutorials that release continuously with every landed patch set. But for contractual documentation like an OpenAPI specification, you can only deploy new documentation when the API is considered released at a specific version.</p>

<h2 id="example-tests-for-docs">Example tests for docs</h2>

<p>You can test doc source files for quality and whether they build. You could also check for spelling or grammar, but typically human reviewers can do this also. The point for testing docs is to take that review burden off of human reviewers and let the automation save time so that more docs can be written and released.</p>

<h3 id="link-check">Link check</h3>

<p>With many static site generators, there are libraries specifically for checking all the links in a site. For example, when checking links on a Jekyll web site like <a href="http://http://docslikecode.com">docslikecode.com</a>, the Travis CI job is simple:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c">#!/usr/bin/env bash</span>
<span class="nb">set</span> -e <span class="c"># halt script on error</span>

bundle <span class="nb">exec </span>jekyll build
bundle <span class="nb">exec </span>htmlproofer ./_site
</code></pre>
</div>

<p>With this type of test in place, human reviewers don’t have to take the time to click every link in a new patch. If an external link should be updated, the results of this test let you know. If an internal link breaks due to the patch itself, the contributor can fix it before a human even needs to review the patch.</p>

<h3 id="json-format">JSON format</h3>

<p>With REST API docs, the requests and responses are often JSON files and are valuable to readers so they can compare their own environment to the documentation. It’s critical that the examples are formatted correctly in case a reader needs to copy and paste the request. In OpenStack, we have a set of common documentation tools that contain a JSON tester and formatter. By running this test on incoming patches to the docs, reviewers can determine if the included JSON files are accurate and formatted correctly. Plus, it makes the patch creation easier for a contributor when they can run a simple command locally to ensure the JSON format is correct.</p>

<h3 id="validated-requests-and-responses">Validated requests and responses</h3>

<p>An advanced documentation test can provide checks for the example requests and responses included in the documentation. When treating docs like code, accuracy is often the highest value. So, by testing examples against a working API endpoint, you can show that the examples will work in the real world as well. This type of validation provides trusted documentation examples that work every time, because they won’t be published unless they pass the validation test.</p>

<h3 id="build-check">Build check</h3>

<p>Automating the documentation tests frees up reviewer time because they do not have to build the docs themselves to review the output. In addition, you can test the build for broken doc links or improperly-formatted JSON files, for example. It’s helpful to review both source documentation and output documentation for any oddities or problems.</p>

<h2 id="conclusion">Conclusion</h2>

<p>Working on documentation collaboratively in the same repositories as the code base provides opportunity to better serve customers. By treating your API docs like code, you can find automation opportunities, gain efficiencies, speed up documentation builds, and enable more reviewers and contributors.</p>


        
      </div><!-- /.entry-content -->
    </div><!-- /.entry-wrapper -->
    <nav class="pagination" role="navigation">
      
        <a href="http://localhost:4000/articles/coming-soon-writing-docs-like-code/" class="btn" title="Coming Soon - Write Docs Like Code Ebook">Previous</a>
      
      
    </nav><!-- /.pagination -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo" class="entry-wrapper">
    

<span>&copy; 2017 Anne Gentle. Powered by <a href="http://jekyllrb.com" target="_blank" rel="nofollow">Jekyll</a> using the <a href="https://mademistakes.com/work/so-simple-jekyll-theme/" target="_blank" rel="nofollow">So Simple Theme</a>.</span>
<div class="social-icons">
	<a href="https://twitter.com/annegentle" title="Anne Gentle on Twitter" target="_blank"><i class="fa fa-twitter-square fa-2x"></i></a>
	
	<a href="https://plus.google.com/+AnneGentle" title="Anne Gentle on Google+" target="_blank"><i class="fa fa-google-plus-square fa-2x"></i></a>
	
	
	
	
	<a href="https://github.com/justwriteclick" title="Anne Gentle on Github" target="_blank"><i class="fa fa-github-square fa-2x"></i></a>
	
  
	
  <a href="http://localhost:4000/feed.xml" title="Atom/RSS feed"><i class="fa fa-rss-square fa-2x"></i></a>
</div><!-- /.social-icons -->

  </footer>
</div><!-- /.footer-wrapper -->

<script type="text/javascript">
  var BASE_URL = 'http://localhost:4000';
</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://localhost:4000/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://localhost:4000/assets/js/scripts.min.js"></script>


<!-- Asynchronous Google Analytics snippet -->
<script>
  var _gaq = _gaq || [];
  var pluginUrl =
 'https://www.google-analytics.com/plugins/ga/inpage_linkid.js';
  _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
  _gaq.push(['_setAccount', 'UA-85706588-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = 'https://stats.g.doubleclick.net/dc.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>



</body>
</html>
